#!/usr/bin/env fish

set CHOICES   $argv[1]
set PROMPT    $argv[2]
set SEP       $argv[3]
set MAX_LINES $argv[4]

test -z $PROMPT    && set PROMPT    '>>'
test -z $SET       && set SEP       ';'
test -z $MAX_LINES && set MAX_LINES '10'

set LINES (echo "$CHOICES" | tr -cd "$SEP" | wc -c)
set LINES (echo "if ( ( $LINES + 1 ) < $MAX_LINES ) ( $LINES + 1 ) else $MAX_LINES" | bc)

echo "$CHOICES" | rofi -dmenu -p "$PROMPT" -sep "$SEP" -lines "$LINES" 2>/dev/null
