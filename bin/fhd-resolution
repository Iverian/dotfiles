#!/usr/bin/env bash

SCRIPT_DIR=$(realpath $(dirname $0))
OUTPUT=$(xrandr | grep ' connected' | cut -f1 -d' ')
CONFIG="$HOME/.config/fhd"

to_fhd() {
    xrandr -d $DISPLAY --output $OUTPUT --mode 1920x1080
    xrdb -merge $SCRIPT_DIR/fhd-xresources
    systemctl --user restart polybar-i3bar.service
}

from_fhd() {
    xrandr -d $DISPLAY --output $OUTPUT --mode 3200x1800
    systemctl --user restart polybar-i3bar.service
}

if [ ! -f "$CONFIG" ] || [ "$(cat $CONFIG)" -eq "0" ]; then
    to_fhd
    echo "1" >"$CONFIG"
else
    from_fhd
    echo "0" >"$CONFIG"
fi
